<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evara - One for All</title>
    <link rel="stylesheet" href="home.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="icon" href="/Logo/evara-logo.svg">

</head>
<body>
    <!-- <nav class="navbar sticky-top navbar-expand-lg" style="box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25); backdrop-filter: blur(4px)">
        <div class="container-fluid">
             <!-- LOGO 
             <a class="navbar-brand" href="#">
                 <img src="G:\PROGRAMMING\EVARA\Navbar\Images\evara-logo_svg.svg" alt="evara-logo" class="evara-logo">
             </a>
             <!-- Hamburger Toggler 
             <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
             <span class="navbar-toggler-icon"></span>
             </button> 
             <!-- Text links 
             <div class="collapse  navbar-collapse navbar-texts" id="navbarSupportedContent">
             <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
                 <li class="nav-item">
                 <a class="nav-link active" aria-current="page" href="#">Home</a>
                 </li>
                 <li class="nav-item">
                     <a class="nav-link" href="#">Explore</a>
                     </li>
                 <li class="nav-item">
                 <a class="nav-link" href="#">About</a>
                 </li>
                 <li class="nav-item">
                     <a class="nav-link" href="#">Contact Us</a>
                 </li>
             </ul>
             <!-- Icons and Sign up 
             <i class="fa-regular fa-bell bell-icon"></i>
             <a class="btn btn-light" href="G:\PROGRAMMING\EVARA\Login\login.html" role="button" style="font-size: 0.9rem; height: 2rem; transform: rotate(-0.61deg); transform-origin: 0 0; background: white; box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25); border-radius: 40px; backdrop-filter: blur(4px)">Login In</a>
             </div>
         </div>
     </nav> -->


     <nav class="navbar sticky-top navbar-expand-lg" style="box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);">
        <div class="container-fluid">
            <!-- LOGO -->
            <a class="navbar-brand" href="#">
                <img src="/Logo/evara-logo.svg" alt="evara-logo" class="evara-logo">
            </a>
            <!-- Hamburger Toggler -->
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!-- Offcanvas Menu -->
            <div class="offcanvas offcanvas-end" data-bs-scroll="true"  tabindex="-1" id="offcanvasNavbar">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title">Menu</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <!-- Text links -->
                    <ul class="navbar-nav mx-auto flex-grow-2 pe-3">
                        <li class="nav-item ">
                            <a class="nav-link active" aria-current="page" href="#">Home</a>
                        </li>
                       
                        <li class="nav-item">
                            <a class="nav-link" href="/about&contact/about.html">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/about&contact/contactus.html">Contact Us</a>
                        </li>
                    </ul>
                    <!-- Icons and Sign up -->
                    <div class="d-flex align-items-center bellandlogin bell">
                        <div id="notificationBell">
                            <img src="/Bell_Image/computer-icons-button-clip-art-alarm-bell-removebg-preview.png" alt="Notifications" width="25">
                            <span class="count" id="notificationCount">0</span>
                        </div>
                    
                        <!-- Notification List -->
                        <div id="notificationList">
                            <ul id="notifications"></ul>
                        </div>
                        <div id="user-section">
                          
                        </div>
                        
                        
                        
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div id="custom-alert" style="display: none; position: fixed; top: 5%; left: 50%; transform: translate(-50%, -30%); background-color: #333; color: #fff; padding: 1rem 1.5rem; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.3); z-index: 5000;">
        <span id="alert-icon">ðŸš€</span> <!-- Customize icon here -->
        <span id="alert-message"></span>
        <button onclick="closeAlert()" style="display: inline-block; margin-left: 1rem; padding: 0.3rem 0.8rem; background: #ff66b2; border: none; color: #fff; border-radius: 5px; cursor: pointer;">OK</button>
      </div>
      
    <!-- HEADER MAIN SEARCH AND SELECT -->
    <!-- <div class="container-header-main ">
        <div class="select-search-box" id="search-form">
            <select class="form-select" aria-label="Default select example" style="width:25%; background-color: rgba(70, 68, 68, 0.062); border-color: rgb(162, 156, 156);">
                <option selected>Select Location</option>
                <option value="1">Location 1</option>
                <option value="2">Location 2</option>
                <option value="3">Location 3</option>
                <option value="4">Location 4</option>
                <option value="5">Location 5</option>
              </select>
            
            <form class="d-flex" role="search" style=" width: 60%;">
            <input class="form-control me-2" type="search" placeholder="Ex. Calculators" aria-label="Search" style=" width: 75%; background-color: rgba(70, 68, 68, 0.062); border-color: rgb(162, 156, 156);">
            <button class="go-button go-type1">
                <span class="go-btn-txt">Go!</span>
              </button>
            </form>

            
             <div>
                <input type="text" id="locationInput" placeholder="Enter location" />
                <ul id="locationSuggestions"></ul>
              </div>
              
              <div>
                <input type="text" id="itemInput" placeholder="Enter item name" />
                <ul id="itemSuggestions"></ul>
              </div>
              
              <button onclick="searchItems()">Search</button>
              
              <div id="results"></div>
        </div>
    </div> -->
  <!-- Search Form -->

  <!-- Search Form -->
  <form class="d-flex" role="search" id="search-bar" style="width: 60%;" onsubmit="handleSearch(event)">
    <input class="form-control me-2" id="search-query" type="search" placeholder="Ex. Calculators" aria-label="Search" style="width: 75%; background-color: rgba(70, 68, 68, 0.062); border-color: rgb(162, 156, 156);">
    <input class="form-control me-2" id="location-input" type="search" placeholder="Location" aria-label="Location" style="width: 75%; background-color: rgba(70, 68, 68, 0.062); border-color: rgb(162, 156, 156);">
    <button class="go-button go-type1" type="submit">
      <span class="go-btn-txt">Go!</span>
    </button>
  </form>

  <!-- Container to display search results -->
  <div id="results-container"></div>

  <script>
    // JavaScript function to handle search request
    function handleSearch(event) {
      event.preventDefault(); // Prevent the form from submitting the traditional way

      const searchQuery = document.getElementById("search-query").value; // Product search term
      const locationQuery = document.getElementById("location-input").value; // Location search term
      const queryString = `search=${encodeURIComponent(searchQuery)}&location=${encodeURIComponent(locationQuery)}`;

      // Fetch results from the backend
      fetch(`/api/search?${queryString}`)
        .then(response => response.json())
        .then(data => displayResults(data))
        .catch(error => console.error("Error fetching search results:", error));
    }

    // Display search results in the DOM
    function displayResults(results) {
      const resultsContainer = document.getElementById("results-container");
      resultsContainer.innerHTML = ""; // Clear previous results

      if (results.length === 0) {
        resultsContainer.innerHTML = "<p>No matching products found.</p>";
      } else {
        results.forEach(item => {
          const itemDiv = document.createElement("div");
          itemDiv.innerHTML = `<p>Product: ${item.product_name}, Location: ${item.location}, Price: ${item.price}</p>`;
          resultsContainer.appendChild(itemDiv);
        });
      }
    }
  </script>

      <!-- <form class="d-flex" role="search" id="search-bar" style="width: 60%;" onsubmit="handleSearch(event)">
        <input class="form-control me-2" id="search-query" type="search" placeholder="Ex. Calculators" aria-label="Search" style="width: 75%; background-color: rgba(70, 68, 68, 0.062); border-color: rgb(162, 156, 156);">
        <input class="form-control me-2" id="location-input" type="search" placeholder="Location" aria-label="Location" style="width: 75%; background-color: rgba(70, 68, 68, 0.062); border-color: rgb(162, 156, 156);">
        <button class="go-button go-type1" type="submit">
          <span class="go-btn-txt">Go!</span>
        </button>
      </form>
    

      <div id="results-container"></div>
    
      <script>
        // JavaScript function to handle search request
        function handleSearch(event) {
          event.preventDefault();
    
          const searchQuery = document.getElementById("search-query").value;
          const locationQuery = document.getElementById("location-input").value;
          const queryString = `search=${encodeURIComponent(searchQuery)}&location=${encodeURIComponent(locationQuery)}`;
    
          fetch(`/api/search?${queryString}`)
            .then(response => response.json())
            .then(data => displayResults(data))
            .catch(error => console.error("Error fetching search results:", error));
        }
    
        // Display search results
        function displayResults(results) {
          const resultsContainer = document.getElementById("results-container");
          resultsContainer.innerHTML = ""; // Clear previous results
    
          results.forEach(item => {
            const itemDiv = document.createElement("div");
            itemDiv.innerHTML = `<p>${item.product_name} - ${item.location}</p>`;
            resultsContainer.appendChild(itemDiv);
          });
        }
      </script> -->

<!-- 
    <div class="container-header-main">
        <div class="select-search-box">
              <input type="text" id="searchBox" placeholder="Search for locations...">

      <div id="suggestions"></div> -->
        <!-- <div class="select-search-box" id="search-form"> -->
          <!-- <select class="form-select" id="location" aria-label="Default select example" style="width:25%; background-color: rgba(70, 68, 68, 0.062); border-color: rgb(162, 156, 156);">
            <option selected>Select Location</option>
            <option value="1">Location 1</option>
            <option value="2">Location 2</option>
            <option value="3">Location 3</option>
            <option value="4">Location 4</option>
            <option value="5">Location 5</option>
          </select> -->
          <!-- <form class="d-flex" role="search" id="search-bar" style="width: 60%;" onsubmit="handleSearch(event)">
            <input class="form-control me-2" id="search-query" type="search" placeholder="Ex. Calculators" aria-label="Search" style="width: 75%; background-color: rgba(70, 68, 68, 0.062); border-color: rgb(162, 156, 156);">
            <button class="go-button go-type1" type="submit">
              <span class="go-btn-txt">Go!</span>
            </button>
          </form>
        </div>
        </div>
      </div> -->
      
      <!-- <script>
      function handleSearch(event) {
        event.preventDefault();
        
        // Get location and search query
        const location = document.getElementById('location').value;
        const query = document.getElementById('search-query').value;
      
        if (location && query) {
          // Send data to backend using Fetch API
          fetch('/search', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ location, query }),
          })
          .then(response => response.json())
          .then(data => {
            console.log('Search results:', data);
            // Handle the response and display results
          })
          .catch(error => {
            console.error('Error:', error);
          });
        } else {
          alert('Please select a location and enter a search term.');
        }
      }
      </script> -->
  
      <script src="script.js"></script> <!-- Link to your external JS file if you are using one -->
      <script>
// Add an event listener to capture input in the search box
document.getElementById('searchBox').addEventListener('input', function() {
    const query = this.value.trim(); // Trim any unnecessary whitespace
    const suggestionsDiv = document.getElementById('suggestions'); // Suggestion display area

    if (query.length > 2) { // Start showing suggestions after 3 characters
        fetch(`/suggest-locations?q=${encodeURIComponent(query)}`)
            .then(response => response.json())
            .then(data => {
                // Clear previous suggestions
                suggestionsDiv.innerHTML = '';

                // Populate the suggestions div with the received data
                data.forEach(location => {
                    const suggestionItem = document.createElement('div');
                    suggestionItem.textContent = location;
                    suggestionItem.className = 'suggestion-item'; // Optional: Add class for styling

                    // Add click event to populate search box with chosen suggestion
                    suggestionItem.addEventListener('click', () => {
                        document.getElementById('searchBox').value = location;
                        suggestionsDiv.innerHTML = ''; // Clear suggestions once selected
                    });

                    // Append each suggestion to the suggestions div
                    suggestionsDiv.appendChild(suggestionItem);
                });
            })
            .catch(error => console.error('Error fetching location suggestions:', error));
    } else {
        // Clear suggestions if query is too short
        suggestionsDiv.innerHTML = '';
    }
});

      </script>
      
    
    <!-- CATEGORIES CIRCLES -->
    <div class="container-lg">
        
        <div class="cat-card-group">
            <div class="cat-card">
                <a href="#" class="cat-card-linker">
                    <div class="cat-card-img-box">
                        <img src="/ImagesHome/calculator2.png" alt="calculators" class="cat-card-img"><br>

                    </div>
                <div class="cat-card-textbox">
                    <p class="cat-card-text">Calculators</p>
                </div>
                </a>
                
            </div>
            <div class="cat-card">
                <a href="#" class="cat-card-linker">
                    <div class="cat-card-img-box">
                        <img src="/ImagesHome/bags.png"alt="bags" class="cat-card-img"><br>
                    </div>
                <div class="cat-card-textbox">
                    <p class="cat-card-text">Bags</p>
                </div>
                </a>
                
            </div>
            <div class="cat-card">
                <a href="#" class="cat-card-linker">
                    <div class="cat-card-img-box">
                        <img src="/ImagesHome/electronics.png"alt="electronics" class="cat-card-img"><br>
                    </div>
                <div class="cat-card-textbox">
                    <p class="cat-card-text">Electronics</p>
                </div>
                </a>
                
            </div>
            <div class="cat-card" >
                <a href="#" class="cat-card-linker">
                    <div class="cat-card-img-box">
                        <img src="/ImagesHome/books.png" alt="books"class="cat-card-img"><br>
                    </div>
                <div class="cat-card-textbox">
                    <p class="cat-card-text">Books</p>
                </div>
                </a>
                
            </div>
            <div class="cat-card">
                <a href="#" class="cat-card-linker">
                    <div class="cat-card-img-box">
                        <img src="/ImagesHome/hostel-decor.png" alt="Hostel Amenities" class="cat-card-img"><br>
                    </div>
                <div class="cat-card-textbox">
                    <p class="cat-card-text">Hostel Amenities</p>
                </div>
                </a>
                
            </div>
            <div class="cat-card">
                <a href="#" class="cat-card-linker">
                    <div class="cat-card-img-box">
                        <img src="/ImagesHome/paints.png" alt="paints" class="cat-card-img"><br>
                    </div>
                    <div class="cat-card-textbox">
                        <p class="cat-card-text">Paints</p>
                    </div>
                </a>
            </div>
        </div>
    </div>

    <!-- FRESH RECOMMENDATION SECTION -->

    <div class="container-lg">
        <p class="fr-text">Fresh<br>Recommendations</p><br>
    </div>

    <!-- TEMPLATE FOR ITEMS -->
    
      <div id="items-container" class="grid-container"></div>
    
    

   <!-- FOOTER -->
    
    
  

   <script src="/socket.io/socket.io.js"></script>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="home.js"></script>
</html>